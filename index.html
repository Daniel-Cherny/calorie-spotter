<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalorieSpotter - Restaurant Calorie Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .restaurant-card { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            transform: translateY(0);
        }
        .restaurant-card:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .search-container {
            position: relative;
            overflow: hidden;
        }
        .search-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));
            border-radius: 12px;
            transition: opacity 0.3s ease;
            opacity: 0;
            pointer-events: none;
        }
        .search-container:focus-within::before {
            opacity: 1;
        }
        .search-input {
            transition: all 0.3s ease;
        }
        .search-input:focus {
            transform: scale(1.02);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.2);
        }
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .button-hover {
            transition: all 0.2s ease;
        }
        .button-hover:hover {
            transform: scale(1.05);
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .nav-item {
            transition: all 0.3s ease;
        }
        .nav-item.active {
            color: #3b82f6;
            transform: translateY(-2px);
        }
        .nav-item:not(.active) {
            color: #6b7280;
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b sticky top-0 z-30">
        <div class="px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                        <span class="text-white text-lg">üéØ</span>
                    </div>
                    <h1 class="text-xl font-bold text-gray-800">CalorieSpotter</h1>
                </div>
                <div class="flex items-center space-x-2">
                    <span id="premiumBadge" class="hidden bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium">üëë Premium</span>
                    <span class="text-green-600" title="Verified Data">üõ°Ô∏è</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab Content Container -->
    <div class="px-4 py-4 pb-20">
        
        <!-- Discover Tab -->
        <div id="discover" class="tab-content active">
            <!-- Data Notice -->
            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                <div class="flex items-center">
                    <span class="text-blue-600 mr-2">üõ°Ô∏è</span>
                    <p class="text-sm text-blue-800">
                        <strong>Verified Data:</strong> All nutrition info from official restaurant sources.
                    </p>
                </div>
            </div>

            <!-- Location -->
            <div class="bg-white rounded-xl shadow-sm p-4 mb-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <span class="text-blue-600 mr-2">üìç</span>
                        <span class="text-gray-700 font-medium">San Francisco, CA</span>
                    </div>
                    <button class="text-blue-600 text-sm font-medium">Change</button>
                </div>
            </div>

            <!-- Search -->
            <div class="search-container bg-white rounded-xl shadow-sm p-4 mb-4">
                <div class="relative">
                    <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 transition-colors duration-300">üîç</span>
                    <input
                        id="searchInput"
                        type="text"
                        placeholder="Search restaurants and menu items..."
                        class="search-input w-full pl-10 pr-4 py-3 bg-gray-50 rounded-lg border-0 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                        oninput="handleSearchInput(this.value)"
                    />
                    <div id="searchSpinner" class="absolute right-3 top-1/2 transform -translate-y-1/2 hidden">
                        <div class="animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"></div>
                    </div>
                </div>
                <div id="searchSuggestions" class="mt-2 text-sm text-gray-500 hidden">
                    <span>üí° Try searching: "coffee", "sandwich", "low calorie", or restaurant names</span>
                </div>
            </div>

            <!-- Restaurant Cards Container -->
            <div id="restaurantContainer" class="space-y-3">
                <!-- Cards will be populated by JavaScript -->
            </div>

            <!-- Premium CTA -->
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl shadow-lg p-6 text-white mt-6">
                <h3 class="text-lg font-semibold mb-2">Want More Local Restaurants?</h3>
                <p class="text-sm mb-4 opacity-90">
                    Premium includes 500+ verified SF restaurants like Tartine, Blue Bottle, La Taqueria.
                </p>
                <button onclick="switchTab('premium')" class="bg-white text-purple-600 px-4 py-2 rounded-lg font-semibold text-sm">
                    Upgrade to Premium - $4.99/month
                </button>
            </div>
        </div>

        <!-- Tracking Tab -->
        <div id="tracking" class="tab-content">
            <!-- Daily Progress Card -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-4">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">Today's Progress</h2>
                    <span class="text-blue-600 text-2xl">üéØ</span>
                </div>
                
                <div class="mb-6">
                    <div class="flex justify-between text-sm text-gray-600 mb-2">
                        <span>Calories</span>
                        <span id="calorieDisplay">1247 / 2000</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div id="progressBar" class="progress-bar h-4 rounded-full bg-green-500" style="width: 62%"></div>
                    </div>
                    <div class="mt-3 text-center">
                        <span id="remainingCalories" class="text-lg font-semibold text-green-600">753 calories remaining</span>
                    </div>
                </div>

                <div class="grid grid-cols-3 gap-3">
                    <div class="text-center p-3 bg-blue-50 rounded-lg">
                        <div id="totalProtein" class="text-lg font-semibold text-blue-600">98g</div>
                        <div class="text-xs text-gray-600">Protein</div>
                    </div>
                    <div class="text-center p-3 bg-yellow-50 rounded-lg">
                        <div id="totalCarbs" class="text-lg font-semibold text-yellow-600">142g</div>
                        <div class="text-xs text-gray-600">Carbs</div>
                    </div>
                    <div class="text-center p-3 bg-purple-50 rounded-lg">
                        <div id="totalFat" class="text-lg font-semibold text-purple-600">65g</div>
                        <div class="text-xs text-gray-600">Fat</div>
                    </div>
                </div>
            </div>

            <!-- Today's Meals -->
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Today's Meals</h3>
                <div id="todaysMeals" class="space-y-3">
                    <div class="text-center py-8 text-gray-500">
                        <span class="text-4xl mb-3 block">‚è∞</span>
                        <p>No meals logged yet</p>
                        <p class="text-sm">Add verified restaurant items from Discover!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Premium Tab -->
        <div id="premium" class="tab-content">
            <div class="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl shadow-lg p-6 text-white mb-6">
                <div class="flex items-center mb-4">
                    <span class="text-3xl mr-3">üëë</span>
                    <h2 class="text-2xl font-bold">CalorieSpotter Premium</h2>
                </div>
                <p class="mb-6">Unlock local restaurant data and advanced nutrition tracking features</p>
                
                <button id="premiumUpgradeBtn" onclick="handlePremiumUpgrade()" class="bg-white text-orange-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                    Start Free Trial - 7 Days
                </button>
            </div>

            <!-- Premium Features -->
            <div class="space-y-4">
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold">Local Restaurant Database</h3>
                        <span class="text-gray-400">üîí</span>
                    </div>
                    <p class="text-gray-600 mb-4">Access verified nutrition data for 500+ local SF restaurants including Tartine, Blue Bottle, La Taqueria, and more</p>
                    <button disabled class="bg-gray-200 text-gray-500 px-4 py-2 rounded-lg text-sm font-medium cursor-not-allowed">
                        Requires Premium
                    </button>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold">Advanced Meal Planning</h3>
                        <span class="text-gray-400">üîí</span>
                    </div>
                    <p class="text-gray-600 mb-4">Plan your entire week's meals with verified calorie data and hit your nutrition goals consistently</p>
                    <button disabled class="bg-gray-200 text-gray-500 px-4 py-2 rounded-lg text-sm font-medium cursor-not-allowed">
                        Requires Premium
                    </button>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-6">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-lg font-semibold">Export Nutrition Reports</h3>
                        <span class="text-gray-400">üîí</span>
                    </div>
                    <p class="text-gray-600 mb-4">Generate detailed PDF reports for healthcare providers with verified nutrition tracking data</p>
                    <button disabled class="bg-gray-200 text-gray-500 px-4 py-2 rounded-lg text-sm font-medium cursor-not-allowed">
                        Requires Premium
                    </button>
                </div>
            </div>
        </div>

        <!-- About Tab -->
        <div id="about" class="tab-content">
            <div class="bg-white rounded-xl shadow-sm p-6 mb-4">
                <div class="flex items-center mb-4">
                    <span class="text-blue-600 mr-3 text-2xl">üõ°Ô∏è</span>
                    <h2 class="text-xl font-semibold text-gray-800">About CalorieSpotter</h2>
                </div>
                
                <div class="space-y-4 text-gray-600">
                    <p>
                        CalorieSpotter provides verified nutrition information for restaurant meals to help you make informed dining choices.
                    </p>
                    
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-green-800 mb-2">Our Data Standards</h3>
                        <ul class="space-y-2 text-sm text-green-700">
                            <li>‚Ä¢ All nutrition data sourced from official restaurant websites</li>
                            <li>‚Ä¢ Verified through multiple authoritative sources</li>
                            <li>‚Ä¢ Regular updates to maintain accuracy</li>
                            <li>‚Ä¢ Clear labeling of data sources and verification status</li>
                        </ul>
                    </div>
                    
                    <div class="bg-yellow-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-yellow-800 mb-2">Important Disclaimers</h3>
                        <ul class="space-y-2 text-sm text-yellow-700">
                            <li>‚Ä¢ Nutrition values may vary by location and preparation</li>
                            <li>‚Ä¢ This app is for informational purposes only</li>
                            <li>‚Ä¢ Not intended as medical or dietary advice</li>
                            <li>‚Ä¢ Consult healthcare professionals for personalized guidance</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm p-6 mb-4">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Contact & Support</h3>
                <div class="space-y-3">
                    <button onclick="window.open('mailto:support@caloriespotter.com')" 
                            class="w-full text-left py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors border">
                        üìß support@caloriespotter.com
                    </button>
                    <button onclick="window.open('mailto:partnerships@caloriespotter.com')" 
                            class="w-full text-left py-3 px-4 rounded-lg hover:bg-gray-50 transition-colors border">
                        ü§ù partnerships@caloriespotter.com
                    </button>
                </div>
            </div>

            <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl shadow-lg p-6 text-white">
                <h3 class="text-lg font-semibold mb-2">Mobile App Coming Soon!</h3>
                <p class="text-sm mb-4 opacity-90">
                    Get notified when CalorieSpotter launches on iOS and Android.
                </p>
                <div class="flex space-x-2">
                    <input type="email" id="emailInput" placeholder="Your email" 
                           class="flex-1 p-2 rounded border border-blue-200 text-gray-800">
                    <button onclick="captureEmail()" class="bg-white text-blue-600 px-4 py-2 rounded font-medium">
                        Notify Me
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 z-40">
        <div class="flex justify-around">
            <button onclick="switchTab('discover')" class="nav-item flex flex-col items-center py-2 px-3 rounded-lg active">
                <span class="text-lg mb-1">üîç</span>
                <span class="text-xs">Discover</span>
            </button>
            <button onclick="switchTab('tracking')" class="nav-item flex flex-col items-center py-2 px-3 rounded-lg">
                <span class="text-lg mb-1">üéØ</span>
                <span class="text-xs">Track</span>
            </button>
            <button onclick="switchTab('premium')" class="nav-item flex flex-col items-center py-2 px-3 rounded-lg">
                <span class="text-lg mb-1">üëë</span>
                <span class="text-xs">Premium</span>
            </button>
            <button onclick="switchTab('about')" class="nav-item flex flex-col items-center py-2 px-3 rounded-lg">
                <span class="text-lg mb-1">‚ÑπÔ∏è</span>
                <span class="text-xs">About</span>
            </button>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 hidden">
        <div class="bg-white rounded-2xl max-w-md w-full p-6">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-800">Upgrade to Premium</h2>
                <button onclick="closePaymentModal()" class="text-gray-400 text-2xl">√ó</button>
            </div>
            
            <div class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-xl mb-6">
                <div class="flex items-center mb-2">
                    <span class="text-2xl mr-2">üëë</span>
                    <span class="text-lg font-semibold">Premium Plan</span>
                </div>
                <div class="text-2xl font-bold mb-1">$4.99/month</div>
                <div class="text-sm opacity-90">Cancel anytime</div>
            </div>

            <div class="space-y-3 mb-6">
                <div class="flex items-center text-gray-700">
                    <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                    <span>Access to local restaurant database</span>
                </div>
                <div class="flex items-center text-gray-700">
                    <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                    <span>Advanced meal planning</span>
                </div>
                <div class="flex items-center text-gray-700">
                    <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                    <span>Detailed nutrition analytics</span>
                </div>
                <div class="flex items-center text-gray-700">
                    <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                    <span>Export nutrition reports</span>
                </div>
            </div>

            <input
                type="email"
                id="premiumEmail"
                placeholder="Your email address"
                class="w-full p-3 border border-gray-300 rounded-lg mb-4"
            />

            <button
                onclick="processPremiumPayment()"
                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg font-semibold hover:shadow-lg transition-all"
            >
                Start Premium Trial - Free for 7 Days
            </button>
            
            <p class="text-xs text-gray-500 text-center mt-3">
                Subscription will auto-renew. Cancel anytime in settings.
            </p>
        </div>
    </div>

    <script>
        // Global State
        let currentTab = 'discover';
        let isPremium = false;
        let dailyCalories = 1247;
        let dailyGoal = 2000;
        let consumedToday = [];
        let favorites = [];

        // Complete Restaurant data
        const restaurants = [
            // McDonald's
            { id: 1, restaurant: "McDonald's", item: "Big Mac", calories: 580, category: "Burgers", protein: 25, carbs: 46, fat: 33, price: 5.99, distance: 0.3, rating: 3.9, verified: true, source: "McDonald's Official" },
            { id: 2, restaurant: "McDonald's", item: "Quarter Pounder with Cheese", calories: 520, category: "Burgers", protein: 30, carbs: 40, fat: 26, price: 6.49, distance: 0.3, rating: 3.9, verified: true, source: "McDonald's Official" },
            { id: 3, restaurant: "McDonald's", item: "Chicken McNuggets (10 piece)", calories: 440, category: "Chicken", protein: 24, carbs: 27, fat: 27, price: 4.89, distance: 0.3, rating: 3.9, verified: true, source: "McDonald's Official" },
            { id: 4, restaurant: "McDonald's", item: "Large Fries", calories: 510, category: "Sides", protein: 6, carbs: 66, fat: 24, price: 3.79, distance: 0.3, rating: 3.9, verified: true, source: "McDonald's Official" },
            
            // Subway
            { id: 5, restaurant: "Subway", item: "6-inch Turkey Breast", calories: 280, category: "Sandwiches", protein: 18, carbs: 46, fat: 4, price: 6.49, distance: 0.6, rating: 3.8, verified: true, source: "Subway Official" },
            { id: 6, restaurant: "Subway", item: "6-inch Italian B.M.T.", calories: 410, category: "Sandwiches", protein: 19, carbs: 44, fat: 16, price: 7.49, distance: 0.6, rating: 3.8, verified: true, source: "Subway Official" },
            
            // Starbucks
            { id: 7, restaurant: "Starbucks", item: "Grande Caffe Latte", calories: 190, category: "Beverages", protein: 13, carbs: 18, fat: 7, price: 5.25, distance: 0.1, rating: 4.1, verified: true, source: "Starbucks Official" },
            { id: 8, restaurant: "Starbucks", item: "Grande Vanilla Latte", calories: 250, category: "Beverages", protein: 12, carbs: 37, fat: 6, price: 5.65, distance: 0.1, rating: 4.1, verified: true, source: "Starbucks Official" },
            
            // Chipotle
            { id: 9, restaurant: "Chipotle", item: "Chicken Bowl (Basic)", calories: 510, category: "Bowls", protein: 45, carbs: 40, fat: 17, price: 9.65, distance: 0.5, rating: 4.2, verified: true, source: "Chipotle Official" },
            { id: 10, restaurant: "Chipotle", item: "Chicken Bowl (Loaded)", calories: 820, category: "Bowls", protein: 47, carbs: 62, fat: 35, price: 12.65, distance: 0.5, rating: 4.2, verified: true, source: "Chipotle Official" },
            
            // Taco Bell
            { id: 11, restaurant: "Taco Bell", item: "Crunchy Taco Supreme", calories: 190, category: "Tacos", protein: 8, carbs: 15, fat: 11, price: 2.49, distance: 0.8, rating: 3.7, verified: true, source: "Taco Bell Official" },
            { id: 12, restaurant: "Taco Bell", item: "Chicken Quesadilla", calories: 520, category: "Quesadillas", protein: 27, carbs: 39, fat: 28, price: 5.49, distance: 0.8, rating: 3.7, verified: true, source: "Taco Bell Official" },
            
            // Upfordayz - Local SF (from official menu)
            // Coffee
            { id: 13, restaurant: "Upfordayz", item: "Espresso", calories: 5, category: "Coffee", protein: 0, carbs: 1, fat: 0, price: 4.00, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 14, restaurant: "Upfordayz", item: "Latte (8 oz)", calories: 120, category: "Coffee", protein: 8, carbs: 12, fat: 6, price: 4.90, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 15, restaurant: "Upfordayz", item: "Cappuccino (8 oz)", calories: 80, category: "Coffee", protein: 4, carbs: 8, fat: 4, price: 4.90, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 16, restaurant: "Upfordayz", item: "Americano (8 oz)", calories: 10, category: "Coffee", protein: 1, carbs: 2, fat: 0, price: 4.15, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 17, restaurant: "Upfordayz", item: "Mocha (8 oz)", calories: 180, category: "Coffee", protein: 8, carbs: 24, fat: 7, price: 5.25, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            // Tea
            { id: 18, restaurant: "Upfordayz", item: "White Blueberry Tea", calories: 5, category: "Tea", protein: 0, carbs: 1, fat: 0, price: 4.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 19, restaurant: "Upfordayz", item: "Black Tea", calories: 2, category: "Tea", protein: 0, carbs: 0, fat: 0, price: 4.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 20, restaurant: "Upfordayz", item: "Green Tea", calories: 2, category: "Tea", protein: 0, carbs: 0, fat: 0, price: 5.25, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 21, restaurant: "Upfordayz", item: "Matcha Latte", calories: 140, category: "Tea", protein: 6, carbs: 18, fat: 5, price: 6.15, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 22, restaurant: "Upfordayz", item: "Chai Latte", calories: 180, category: "Tea", protein: 6, carbs: 32, fat: 4, price: 5.25, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            // Juices & Smoothies
            { id: 23, restaurant: "Upfordayz", item: "Chocolate Dream Shake", calories: 380, category: "Shakes", protein: 25, carbs: 42, fat: 12, price: 10.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 24, restaurant: "Upfordayz", item: "Red Prime Smoothie", calories: 280, category: "Smoothies", protein: 12, carbs: 48, fat: 6, price: 9.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 25, restaurant: "Upfordayz", item: "Go Green Juice", calories: 120, category: "Juices", protein: 4, carbs: 28, fat: 1, price: 8.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 26, restaurant: "Upfordayz", item: "Why Ginger Juice", calories: 90, category: "Juices", protein: 2, carbs: 22, fat: 0, price: 8.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 27, restaurant: "Upfordayz", item: "Orange Shot", calories: 25, category: "Shots", protein: 1, carbs: 6, fat: 0, price: 4.50, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            // Food
            { id: 28, restaurant: "Upfordayz", item: "Egg Sandwich", calories: 420, category: "Breakfast", protein: 22, carbs: 35, fat: 22, price: 10.50, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 29, restaurant: "Upfordayz", item: "Wellness Sandwich", calories: 380, category: "Breakfast", protein: 18, carbs: 42, fat: 16, price: 11.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 30, restaurant: "Upfordayz", item: "Pancake's Favorite", calories: 520, category: "Breakfast", protein: 12, carbs: 68, fat: 22, price: 13.50, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 31, restaurant: "Upfordayz", item: "Yogurt Bowl", calories: 320, category: "Breakfast", protein: 15, carbs: 48, fat: 8, price: 12.50, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
            { id: 32, restaurant: "Upfordayz", item: "Eat With Purpose Bowl", calories: 450, category: "Bowls", protein: 18, carbs: 52, fat: 20, price: 12.95, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },

            // Peasant Pies - Local SF
            { id: 33, restaurant: "Peasant Pies", item: "Beef & Potato Pie", calories: 530, category: "Savory Pies", protein: 18, carbs: 46, fat: 30, price: 12.95, distance: 1.1, rating: 4.3, verified: true, source: "Official Menu", isLocal: true },
            { id: 34, restaurant: "Peasant Pies", item: "Chicken & Potato Pie", calories: 290, category: "Savory Pies", protein: 10, carbs: 51, fat: 5, price: 11.95, distance: 1.1, rating: 4.3, verified: true, source: "Official Menu", isLocal: true },
            { id: 35, restaurant: "Peasant Pies", item: "Ham, Eggs & Cheese Pie", calories: 400, category: "Breakfast Pies", protein: 20, carbs: 38, fat: 18, price: 10.95, distance: 1.1, rating: 4.3, verified: true, source: "Official Menu", isLocal: true },
            { id: 36, restaurant: "Peasant Pies", item: "Spinach & Feta Cheese Pie", calories: 340, category: "Vegetarian Pies", protein: 18, carbs: 39, fat: 13, price: 9.95, distance: 1.1, rating: 4.3, verified: true, source: "Official Menu", isLocal: true },
            { id: 37, restaurant: "Peasant Pies", item: "Garbanzo Bean Curry Pie", calories: 270, category: "Vegan Pies", protein: 10, carbs: 52, fat: 2.5, price: 9.95, distance: 1.1, rating: 4.3, verified: true, source: "Official Menu", isLocal: true },

            // Trailer Birds Hot Chicken - Local SF
            { id: 38, restaurant: "Trailer Birds", item: "Hot Chicken Sandwich", calories: 860, category: "Sandwiches", protein: 45, carbs: 65, fat: 38, price: 13.95, distance: 0.9, rating: 4.6, verified: true, source: "Official Menu", isLocal: true },
            { id: 39, restaurant: "Trailer Birds", item: "3 Hot Tenders", calories: 470, category: "Chicken", protein: 35, carbs: 25, fat: 28, price: 9.95, distance: 0.9, rating: 4.6, verified: true, source: "Official Menu", isLocal: true },
            { id: 40, restaurant: "Trailer Birds", item: "6 Hot Tenders", calories: 890, category: "Chicken", protein: 65, carbs: 45, fat: 52, price: 16.95, distance: 0.9, rating: 4.6, verified: true, source: "Official Menu", isLocal: true },
            { id: 41, restaurant: "Trailer Birds", item: "Seasoned Crispy Tots", calories: 350, category: "Sides", protein: 5, carbs: 48, fat: 16, price: 6.95, distance: 0.9, rating: 4.6, verified: true, source: "Official Menu", isLocal: true },
            { id: 42, restaurant: "Trailer Birds", item: "Hand-Cut Fries", calories: 240, category: "Sides", protein: 4, carbs: 35, fat: 10, price: 5.95, distance: 0.9, rating: 4.6, verified: true, source: "Official Menu", isLocal: true }
        ];

        // Helper functions
        function getCalorieBadge(calories) {
            if (calories < 300) return 'bg-green-100 text-green-800';
            if (calories < 500) return 'bg-yellow-100 text-yellow-800';
            return 'bg-red-100 text-red-800';
        }

        function createRestaurantCard(item, index = 0) {
            return `
                <div class="restaurant-card bg-white rounded-xl shadow-sm p-4 fade-in" style="animation-delay: ${index * 50}ms">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-lg font-semibold text-gray-800">${item.item}</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="px-3 py-1 rounded-full text-xs font-medium ${getCalorieBadge(item.calories)} transition-all duration-300">
                                        ${item.calories} cal
                                    </span>
                                    ${item.verified ? 
                                        '<span class="text-green-600 transition-transform duration-300 hover:scale-110" title="Verified Data">üõ°Ô∏è</span>' : 
                                        '<span class="text-orange-500 transition-transform duration-300 hover:scale-110" title="Estimated">‚ö†Ô∏è</span>'
                                    }
                                </div>
                            </div>
                            
                            <div class="flex items-center text-gray-600 mb-2">
                                <span class="font-medium gradient-text">${item.restaurant}</span>
                                <span class="mx-2">‚Ä¢</span>
                                <span>${item.category}</span>
                                ${item.isLocal ? '<span class="ml-2 px-2 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs rounded-full animate-pulse">Local SF</span>' : ''}
                            </div>
                            
                            <div class="flex items-center text-sm text-gray-500 mb-3">
                                <span>üìç</span>
                                <span class="ml-1">${item.distance} mi</span>
                                <span class="mx-2">‚Ä¢</span>
                                <span>‚≠ê</span>
                                <span class="ml-1">${item.rating}</span>
                                <span class="mx-2">‚Ä¢</span>
                                <span class="font-medium text-green-600">${item.price}</span>
                            </div>
                            
                            <div class="flex justify-between items-center mb-2">
                                <div class="text-xs text-gray-500 bg-gray-50 rounded-lg px-2 py-1">
                                    <span class="font-medium">P:</span> ${item.protein}g ‚Ä¢ 
                                    <span class="font-medium">C:</span> ${item.carbs}g ‚Ä¢ 
                                    <span class="font-medium">F:</span> ${item.fat}g
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="addToFavorites(${item.id})" 
                                            class="button-hover p-2 bg-gradient-to-r from-pink-100 to-red-100 text-red-600 rounded-full hover:from-pink-200 hover:to-red-200 transition-all duration-300">
                                        ‚ù§Ô∏è
                                    </button>
                                    <button onclick="addToTracking(${item.id})" 
                                            class="button-hover p-2 bg-gradient-to-r from-blue-100 to-purple-100 text-blue-600 rounded-full hover:from-blue-200 hover:to-purple-200 transition-all duration-300">
                                        ‚ûï
                                    </button>
                                </div>
                            </div>
                            
                            <div class="text-xs text-gray-400 flex items-center">
                                ${item.verified ? '‚úÖ Verified' : '‚ö†Ô∏è Estimated'} ‚Ä¢ ${item.source}
                                ${item.verified ? '<span class="ml-2 text-green-500">‚Ä¢</span>' : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Enhanced search with debouncing and better UX
        let searchTimeout;
        let isSearching = false;

        function handleSearchInput(value) {
            const spinner = document.getElementById('searchSpinner');
            const suggestions = document.getElementById('searchSuggestions');
            
            // Show spinner for longer searches
            if (value.length > 2 && !isSearching) {
                spinner.classList.remove('hidden');
                isSearching = true;
            }
            
            // Debounce the search
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                filterRestaurants(value);
                spinner.classList.add('hidden');
                isSearching = false;
                
                // Show/hide suggestions
                if (value.length === 0) {
                    suggestions.classList.remove('hidden');
                } else {
                    suggestions.classList.add('hidden');
                }
            }, 150);
        }

        function filterRestaurants(searchTerm = '') {
            if (!searchTerm) {
                searchTerm = document.getElementById('searchInput').value.toLowerCase();
            } else {
                searchTerm = searchTerm.toLowerCase();
            }
            
            const container = document.getElementById('restaurantContainer');
            
            let filteredRestaurants;
            if (!searchTerm.trim()) {
                filteredRestaurants = restaurants;
            } else {
                filteredRestaurants = restaurants.filter(item => 
                    item.item.toLowerCase().includes(searchTerm) ||
                    item.restaurant.toLowerCase().includes(searchTerm) ||
                    item.category.toLowerCase().includes(searchTerm)
                );
            }
            
            // Enhanced empty state
            if (filteredRestaurants.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500 fade-in">
                        <div class="text-6xl mb-4 animate-bounce">üîç</div>
                        <h3 class="text-lg font-medium mb-2">No restaurants found</h3>
                        <p class="text-sm mb-4">Try searching for something else</p>
                        <div class="flex flex-wrap justify-center gap-2 mt-4">
                            <button onclick="quickSearch('coffee')" class="px-3 py-1 bg-blue-100 text-blue-600 rounded-full text-sm button-hover">coffee</button>
                            <button onclick="quickSearch('sandwich')" class="px-3 py-1 bg-green-100 text-green-600 rounded-full text-sm button-hover">sandwich</button>
                            <button onclick="quickSearch('low calorie')" class="px-3 py-1 bg-purple-100 text-purple-600 rounded-full text-sm button-hover">low calorie</button>
                        </div>
                    </div>
                `;
            } else {
                container.innerHTML = filteredRestaurants.map((item, index) => createRestaurantCard(item, index)).join('');
            }
        }

        function quickSearch(term) {
            document.getElementById('searchInput').value = term;
            handleSearchInput(term);
        }

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to selected nav item
            event.target.closest('.nav-item').classList.add('active');
            
            currentTab = tabName;
        }

        // Tracking functionality
        function addToFavorites(id) {
            const item = restaurants.find(r => r.id === id);
            
            // Enhanced feedback with animation
            const button = event.target.closest('button');
            button.style.transform = 'scale(1.2)';
            button.classList.add('animate-pulse');
            
            setTimeout(() => {
                button.style.transform = '';
                button.classList.remove('animate-pulse');
                showToast(`‚ù§Ô∏è Added "${item.item}" to favorites!`, 'success');
            }, 200);
            
            favorites.push(item);
        }

        function addToTracking(id) {
            const item = restaurants.find(r => r.id === id);
            
            // Enhanced feedback with animation
            const button = event.target.closest('button');
            button.style.transform = 'scale(1.2)';
            button.classList.add('animate-pulse');
            
            setTimeout(() => {
                button.style.transform = '';
                button.classList.remove('animate-pulse');
                showToast(`üìä Added "${item.item}" (${item.calories} cal) to daily tracking!`, 'success');
            }, 200);
            
            // Add to consumed today
            consumedToday.push({...item, timestamp: Date.now()});
            dailyCalories += item.calories;
            
            // Update tracking display
            updateTrackingDisplay();
        }

        function updateTrackingDisplay() {
            const calorieProgress = Math.min((dailyCalories / dailyGoal) * 100, 100);
            const remainingCalories = dailyGoal - dailyCalories;
            
            document.getElementById('calorieDisplay').textContent = `${dailyCalories} / ${dailyGoal}`;
            document.getElementById('progressBar').style.width = `${calorieProgress}%`;
            
            const remainingElement = document.getElementById('remainingCalories');
            if (remainingCalories >= 0) {
                remainingElement.textContent = `${remainingCalories} calories remaining`;
                remainingElement.className = 'text-lg font-semibold text-green-600';
                document.getElementById('progressBar').className = 'progress-bar h-4 rounded-full bg-green-500';
            } else {
                remainingElement.textContent = `${Math.abs(remainingCalories)} calories over goal`;
                remainingElement.className = 'text-lg font-semibold text-red-600';
                document.getElementById('progressBar').className = 'progress-bar h-4 rounded-full bg-red-500';
            }
            
            // Update macros
            const totalProtein = consumedToday.reduce((sum, item) => sum + item.protein, 0);
            const totalCarbs = consumedToday.reduce((sum, item) => sum + item.carbs, 0);
            const totalFat = consumedToday.reduce((sum, item) => sum + item.fat, 0);
            
            document.getElementById('totalProtein').textContent = `${totalProtein}g`;
            document.getElementById('totalCarbs').textContent = `${totalCarbs}g`;
            document.getElementById('totalFat').textContent = `${totalFat}g`;
            
            // Update meals list
            updateMealsList();
        }

        function updateMealsList() {
            const mealsContainer = document.getElementById('todaysMeals');
            
            if (consumedToday.length === 0) {
                mealsContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <span class="text-4xl mb-3 block">‚è∞</span>
                        <p>No meals logged yet</p>
                        <p class="text-sm">Add verified restaurant items from Discover!</p>
                    </div>
                `;
            } else {
                mealsContainer.innerHTML = consumedToday.map((item, index) => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center">
                            <span class="text-green-600 mr-3">üõ°Ô∏è</span>
                            <div>
                                <div class="font-medium text-gray-800">${item.item}</div>
                                <div class="text-sm text-gray-600">${item.restaurant} ‚Ä¢ ${item.calories} cal</div>
                            </div>
                        </div>
                        <button onclick="removeFromTracking(${index})" class="p-2 text-red-600 hover:bg-red-100 rounded-full">
                            ‚ûñ
                        </button>
                    </div>
                `).join('');
            }
        }

        function removeFromTracking(index) {
            const item = consumedToday[index];
            dailyCalories -= item.calories;
            consumedToday.splice(index, 1);
            updateTrackingDisplay();
            showToast(`üóëÔ∏è Removed "${item.item}" from tracking`, 'info');
        }

        // Premium functionality
        function handlePremiumUpgrade() {
            document.getElementById('paymentModal').classList.remove('hidden');
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.add('hidden');
        }

        function processPremiumPayment() {
            const email = document.getElementById('premiumEmail').value;
            if (!email) {
                showToast('Please enter your email address', 'error');
                return;
            }
            
            isPremium = true;
            document.getElementById('premiumBadge').classList.remove('hidden');
            closePaymentModal();
            showToast('üéâ Welcome to CalorieSpotter Premium!', 'success');
        }

        // Utility functions
        function showToast(message, type = 'info') {
            // Create toast notification
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg text-white transition-all duration-300 transform translate-x-full`;
            
            if (type === 'success') {
                toast.classList.add('bg-green-500');
            } else if (type === 'error') {
                toast.classList.add('bg-red-500');
            } else {
                toast.classList.add('bg-blue-500');
            }
            
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Animate in
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 10);
            
            // Animate out after 3 seconds
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        function captureEmail() {
            const email = document.getElementById('emailInput').value;
            if (email) {
                showToast('üöÄ Thanks! We\'ll notify you when the mobile app launches!', 'success');
                document.getElementById('emailInput').value = '';
            } else {
                showToast('Please enter your email address', 'error');
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            filterRestaurants(); // Show all restaurants initially
            updateTrackingDisplay(); // Initialize tracking display
        });
    </script>
</body>
</html>
