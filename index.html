<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalPlate - Restaurant Calorie Finder</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .icon { width: 20px; height: 20px; display: inline-block; }
        .icon-sm { width: 16px; height: 16px; }
        .search-input { outline: none !important; }
        .search-input:focus { outline: none !important; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5) !important; }
        .restaurant-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform: translateY(0); }
        .restaurant-card:hover { transform: translateY(-4px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .nav-item { transition: all 0.3s ease; }
        .nav-item.active { color: #3b82f6; transform: translateY(-2px); }
        .progress-bar { transition: width 0.5s ease; }
        .loading { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .filter-panel { transition: all 0.3s ease-out; max-height: 0; overflow: hidden; }
        .filter-panel.open { max-height: 500px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useRef, useEffect, useCallback, memo } = React;

        // Icons
        const Search = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
        ));
        const Filter = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L16 11.414V16a1 1 0 01-.293.707l-2 2A1 1 0 0113 18v-6.586L6.293 6.707A1 1 0 016 6V4z" />
            </svg>
        ));
        const MapPin = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        ));
        const Target = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        ));
        const Star = memo(({ className = "icon" }) => (
            <svg className={className} fill="currentColor" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
            </svg>
        ));
        const Clock = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        ));
        const Crown = memo(({ className = "icon" }) => (
            <svg className={className} fill="currentColor" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3l5.5 7L12 3l1.5 7L19 3l-1 14H6L5 3z" />
            </svg>
        ));
        const Heart = memo(({ className = "icon" }) => (
            <svg className={className} fill="currentColor" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
        ));
        const Plus = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
            </svg>
        ));
        const Minus = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 12H4" />
            </svg>
        ));
        const Shield = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
        ));
        const Info = memo(({ className = "icon" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        ));

        // Restaurant data loading hook
        const useRestaurantData = () => {
            const [data, setData] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            useEffect(() => {
                const loadData = async () => {
                    try {
                        const response = await fetch('data/restaurants.json');
                        if (!response.ok) {
                            throw new Error('Failed to load restaurant data');
                        }
                        const jsonData = await response.json();
                        setData(jsonData.restaurants);
                        setLoading(false);
                    } catch (err) {
                        console.warn('restaurants.json not found, using sample data:', err.message);
                        const sampleData = [
                            { id: 1, restaurant: "McDonald's", item: "Big Mac", calories: 580, category: "Burgers", protein: 25, carbs: 46, fat: 33, price: 5.99, distance: 0.3, rating: 3.9, verified: true, source: "McDonald's Official" },
                            { id: 2, restaurant: "McDonald's", item: "Quarter Pounder with Cheese", calories: 520, category: "Burgers", protein: 30, carbs: 40, fat: 26, price: 6.49, distance: 0.3, rating: 3.9, verified: true, source: "McDonald's Official" },
                            { id: 3, restaurant: "Subway", item: "6-inch Turkey Breast", calories: 280, category: "Sandwiches", protein: 18, carbs: 46, fat: 4, price: 6.49, distance: 0.6, rating: 3.8, verified: true, source: "Subway Official" },
                            { id: 4, restaurant: "Starbucks", item: "Grande Caffe Latte", calories: 190, category: "Beverages", protein: 13, carbs: 18, fat: 7, price: 5.25, distance: 0.1, rating: 4.1, verified: true, source: "Starbucks Official" },
                            { id: 5, restaurant: "Chipotle", item: "Chicken Bowl (Basic)", calories: 510, category: "Bowls", protein: 45, carbs: 40, fat: 17, price: 9.65, distance: 0.5, rating: 4.2, verified: true, source: "Chipotle Official" },
                            { id: 6, restaurant: "Upfordayz", item: "Espresso", calories: 5, category: "Coffee", protein: 0, carbs: 1, fat: 0, price: 4.00, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
                            { id: 7, restaurant: "Upfordayz", item: "Latte (8 oz)", calories: 120, category: "Coffee", protein: 8, carbs: 12, fat: 6, price: 4.90, distance: 0.7, rating: 4.5, verified: true, source: "Official Menu", isLocal: true },
                            { id: 8, restaurant: "Sweetgreen", item: "Harvest Bowl", calories: 740, category: "Bowls", protein: 32, carbs: 60, fat: 41, price: 15.95, distance: 0.4, rating: 4.4, verified: true, source: "Official Website", isLocal: true },
                            { id: 9, restaurant: "Souvla", item: "Pork Shoulder Sandwich", calories: 557, category: "Sandwiches", protein: 36, carbs: 29, fat: 33, price: 16.95, distance: 0.6, rating: 4.5, verified: true, source: "Official Nutrition PDF", isLocal: true },
                            { id: 10, restaurant: "True Food Kitchen", item: "Grass-Fed Burger", calories: 660, category: "Burgers", protein: 51, carbs: 40, fat: 35, price: 19.95, distance: 0.8, rating: 4.3, verified: true, source: "Official Nutrition Guide", isLocal: true, seedOilFree: true }
                        ];
                        await new Promise(resolve => setTimeout(resolve, 500));
                        setData(sampleData);
                        setLoading(false);
                    }
                };
                loadData();
            }, []);
            return { data, loading, error };
        };

        const FilterPanel = memo(({ filters, setFilters, restaurantData }) => {
            const maxCal = useMemo(() => Math.max(...restaurantData.map(i => i.calories), 1200), [restaurantData]);

            const handleFilterChange = (key, value) => {
                setFilters(prev => ({ ...prev, [key]: value }));
            };

            const handleToggle = (key) => {
                setFilters(prev => ({ ...prev, [key]: !prev[key] }));
            }

            return (
                <div className="bg-white rounded-xl shadow-sm p-4 mb-4 fade-in">
                    <div className="space-y-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700">Max Calories: <span className="font-bold text-blue-600">{filters.maxCalories}</span></label>
                            <input
                                type="range"
                                min="100"
                                max={maxCal}
                                step="10"
                                value={filters.maxCalories}
                                onChange={(e) => handleFilterChange('maxCalories', parseInt(e.target.value))}
                                className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                            />
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Sort By</label>
                            <select 
                                value={filters.sortBy}
                                onChange={(e) => handleFilterChange('sortBy', e.target.value)}
                                className="w-full p-2 bg-gray-50 border-0 rounded-lg focus:ring-2 focus:ring-blue-500"
                            >
                                <option value="default">Default</option>
                                <option value="price-asc">Price (Low to High)</option>
                                <option value="price-desc">Price (High to Low)</option>
                                <option value="calories-asc">Calories (Low to High)</option>
                                <option value="calories-desc">Calories (High to Low)</option>
                                <option value="protein-desc">Protein (High to Low)</option>
                            </select>
                        </div>

                        <div className="flex items-center space-x-4">
                            <label className="flex items-center cursor-pointer">
                                <input type="checkbox" checked={filters.isLocal} onChange={() => handleToggle('isLocal')} className="h-4 w-4 rounded text-blue-600 focus:ring-blue-500" />
                                <span className="ml-2 text-sm text-gray-700">Local SF Only</span>
                            </label>
                            <label className="flex items-center cursor-pointer">
                                <input type="checkbox" checked={filters.seedOilFree} onChange={() => handleToggle('seedOilFree')} className="h-4 w-4 rounded text-green-600 focus:ring-green-500" />
                                <span className="ml-2 text-sm text-gray-700">Seed Oil-Free</span>
                            </label>
                        </div>
                    </div>
                </div>
            );
        });

        const SearchBar = memo(({ searchQuery, onSearchChange, onFilterToggle, filterCount }) => (
            <div className="bg-white rounded-xl shadow-sm p-4 mb-4">
                <div className="flex items-center space-x-3">
                    <div className="relative flex-grow">
                        <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5" />
                        <input
                            type="text"
                            placeholder="Search restaurants and menu items..."
                            className="search-input w-full pl-10 pr-4 py-3 bg-gray-50 rounded-lg border-0 focus:ring-2 focus:ring-blue-500"
                            value={searchQuery}
                            onChange={(e) => onSearchChange(e.target.value)}
                            autoComplete="off"
                            spellCheck="false"
                        />
                    </div>
                    <button onClick={onFilterToggle} className="relative p-3 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors">
                        <Filter className="h-5 w-5" />
                        {filterCount > 0 && (
                            <span className="absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-600 text-white text-xs">{filterCount}</span>
                        )}
                    </button>
                </div>
            </div>
        ));

        const RestaurantCard = memo(({ item, onAddToFavorites, onAddToTracking, isFavorited }) => {
            const getCalorieBadge = useCallback((calories) => {
                if (calories < 300) return 'bg-green-100 text-green-800';
                if (calories < 500) return 'bg-yellow-100 text-yellow-800';
                return 'bg-red-100 text-red-800';
            }, []);

            return (
                <div className="restaurant-card bg-white rounded-xl shadow-sm p-4 fade-in">
                    <div className="flex items-start justify-between">
                        <div className="flex-1">
                            <div className="flex items-center justify-between mb-2">
                                <h3 className="text-lg font-semibold text-gray-800">{item.item}</h3>
                                <div className="flex items-center space-x-2">
                                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getCalorieBadge(item.calories)}`}>
                                        {item.calories} cal
                                    </span>
                                    <Shield className="h-4 w-4 text-green-600" />
                                </div>
                            </div>
                            
                            <div className="flex items-center text-gray-600 mb-2 flex-wrap">
                                <span className="font-medium">{item.restaurant}</span>
                                <span className="mx-2">‚Ä¢</span>
                                <span>{item.category}</span>
                                {item.isLocal && (
                                    <span className="ml-2 px-2 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs rounded-full">Local SF</span>
                                )}
                                {item.seedOilFree && (
                                    <span className="ml-2 px-2 py-1 bg-gradient-to-r from-green-400 to-teal-500 text-white text-xs rounded-full">Seed Oil Free</span>
                                )}
                            </div>
                            
                            <div className="flex items-center text-sm text-gray-500 mb-3">
                                <MapPin className="h-3 w-3 mr-1" />
                                <span>{item.distance} mi</span>
                                <span className="mx-2">‚Ä¢</span>
                                <Star className="h-3 w-3 text-yellow-500 mr-1" />
                                <span>{item.rating}</span>
                                <span className="mx-2">‚Ä¢</span>
                                <span className="font-medium text-green-600">${item.price}</span>
                            </div>
                            
                            <div className="flex justify-between items-center mb-2">
                                <div className="text-xs text-gray-500 bg-gray-50 rounded-lg px-2 py-1">
                                    <span className="font-medium">P:</span> {item.protein}g ‚Ä¢ 
                                    <span className="font-medium">C:</span> {item.carbs}g ‚Ä¢ 
                                    <span className="font-medium">F:</span> {item.fat}g
                                </div>
                                <div className="flex space-x-2">
                                    <button
                                        onClick={() => onAddToFavorites(item)}
                                        className={`p-2 rounded-full transition-all duration-300 ${
                                            isFavorited 
                                                ? 'bg-red-100 text-red-600' 
                                                : 'bg-gray-100 text-gray-600 hover:bg-red-100 hover:text-red-600'
                                        }`}
                                    >
                                        <Heart className="h-4 w-4" />
                                    </button>
                                    <button
                                        onClick={() => onAddToTracking(item)}
                                        className="p-2 bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200 transition-all duration-300"
                                    >
                                        <Plus className="h-4 w-4" />
                                    </button>
                                </div>
                            </div>
                            
                            <div className="text-xs text-gray-400">
                                ‚úÖ Verified ‚Ä¢ {item.source}
                            </div>
                        </div>
                    </div>
                </div>
            );
        });

        const LoadingCard = memo(() => (
            <div className="bg-white rounded-xl shadow-sm p-4 mb-3">
                <div className="loading">
                    <div className="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
                    <div className="h-3 bg-gray-200 rounded w-1/2 mb-2"></div>
                    <div className="h-3 bg-gray-200 rounded w-1/4"></div>
                </div>
            </div>
        ));

        const LocalPlateApp = () => {
            const { data: restaurantData, loading, error } = useRestaurantData();
            
            const [currentView, setCurrentView] = useState('discover');
            const [searchQuery, setSearchQuery] = useState('');
            const [dailyCalories, setDailyCalories] = useState(1247);
            const [dailyGoal, setDailyGoal] = useState(2000);
            const [consumedToday, setConsumedToday] = useState([]);
            const [favorites, setFavorites] = useState([]);
            const [isPremium, setIsPremium] = useState(false);
            const [showFilters, setShowFilters] = useState(false);
            const [filters, setFilters] = useState({
                maxCalories: 1200,
                sortBy: 'default',
                isLocal: false,
                seedOilFree: false,
            });

            const filteredRestaurants = useMemo(() => {
                let results = [...restaurantData];

                if (searchQuery.trim()) {
                    const query = searchQuery.toLowerCase().trim();
                    results = results.filter(item => 
                        item.item.toLowerCase().includes(query) ||
                        item.restaurant.toLowerCase().includes(query) ||
                        item.category.toLowerCase().includes(query)
                    );
                }

                // Apply filters
                results = results.filter(item => item.calories <= filters.maxCalories);
                if (filters.isLocal) results = results.filter(item => item.isLocal);
                if (filters.seedOilFree) results = results.filter(item => item.seedOilFree);

                // Apply sorting
                const sortedResults = [...results].sort((a, b) => {
                    switch (filters.sortBy) {
                        case 'price-asc': return a.price - b.price;
                        case 'price-desc': return b.price - a.price;
                        case 'calories-asc': return a.calories - b.calories;
                        case 'calories-desc': return b.calories - a.calories;
                        case 'protein-desc': return b.protein - a.protein;
                        default: return 0;
                    }
                });

                return sortedResults;
            }, [searchQuery, restaurantData, filters]);
            
            const activeFilterCount = useMemo(() => {
                let count = 0;
                if (filters.maxCalories < 1200) count++;
                if (filters.isLocal) count++;
                if (filters.seedOilFree) count++;
                return count;
            }, [filters]);

            const handleSearchChange = useCallback((value) => setSearchQuery(value), []);

            const addToConsumed = useCallback((item) => {
                setConsumedToday(prev => [...prev, { ...item, timestamp: Date.now() }]);
                setDailyCalories(prev => prev + item.calories);
            }, []);

            const removeFromConsumed = useCallback((index) => {
                const item = consumedToday[index];
                setDailyCalories(prev => prev - item.calories);
                setConsumedToday(prev => prev.filter((_, i) => i !== index));
            }, [consumedToday]);

            const toggleFavorite = useCallback((item) => {
                setFavorites(prev => 
                    prev.some(fav => fav.id === item.id) 
                        ? prev.filter(fav => fav.id !== item.id) 
                        : [...prev, item]
                );
            }, [favorites]);

            if (error) {
                return (
                    <div className="min-h-screen bg-gray-50 flex items-center justify-center">
                        <div className="text-center">
                            <h2 className="text-xl font-semibold text-red-600 mb-2">Error loading data</h2>
                            <p className="text-gray-600">{error}</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="bg-white shadow-sm border-b sticky top-0 z-30">
                        <div className="px-4 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center">
                                    <div className="bg-gradient-to-r from-blue-600 to-purple-600 w-8 h-8 rounded-full flex items-center justify-center mr-3">
                                        <Target className="h-5 w-5 text-white" />
                                    </div>
                                    <h1 className="text-xl font-bold text-gray-800">LocalPlate</h1>
                                </div>
                                <div className="flex items-center space-x-2">
                                    {isPremium && (
                                        <div className="flex items-center bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">
                                            <Crown className="h-3 w-3 mr-1" />
                                            <span>Premium</span>
                                        </div>
                                    )}
                                    <Shield className="h-5 w-5 text-green-600" title="Verified Data" />
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="px-4 py-4">
                        {currentView === 'discover' && (
                            <div className="pb-20">
                                <SearchBar 
                                    searchQuery={searchQuery} 
                                    onSearchChange={handleSearchChange} 
                                    onFilterToggle={() => setShowFilters(prev => !prev)}
                                    filterCount={activeFilterCount}
                                />
                                <div className={`filter-panel ${showFilters ? 'open' : ''}`}>{
                                    !loading && <FilterPanel filters={filters} setFilters={setFilters} restaurantData={restaurantData} />
                                }</div>
                                <div className="space-y-3">
                                    {loading ? (
                                        Array.from({ length: 5 }).map((_, i) => <LoadingCard key={i} />)
                                    ) : filteredRestaurants.length === 0 ? (
                                        <div className="text-center py-12 text-gray-500 fade-in">
                                            <div className="text-6xl mb-4 animate-bounce">üîç</div>
                                            <h3 className="text-lg font-medium mb-2">No restaurants found</h3>
                                            <p className="text-sm mb-4">Try adjusting your search or filters</p>
                                        </div>
                                    ) : (
                                        filteredRestaurants.map((item) => (
                                            <RestaurantCard
                                                key={item.id}
                                                item={item}
                                                onAddToFavorites={toggleFavorite}
                                                onAddToTracking={addToConsumed}
                                                isFavorited={favorites.some(fav => fav.id === item.id)}
                                            />
                                        ))
                                    )}
                                </div>
                            </div>
                        )}

                        {currentView === 'tracking' && (
                            <div className="pb-20">
                                <div className="bg-white rounded-xl shadow-sm p-6 mb-4">
                                    <h2 className="text-xl font-semibold text-gray-800 mb-4">Today's Progress</h2>
                                    <div className="mb-6">
                                        <div className="flex justify-between text-sm text-gray-600 mb-2">
                                            <span>Calories</span>
                                            <span>{dailyCalories} / {dailyGoal}</span>
                                        </div>
                                        <div className="w-full bg-gray-200 rounded-full h-4">
                                            <div 
                                                className="h-4 rounded-full progress-bar bg-green-500"
                                                style={{ width: `${Math.min((dailyCalories / dailyGoal) * 100, 100)}%` }}
                                            ></div>
                                        </div>
                                        <div className="mt-3 text-center">
                                            <span className="text-lg font-semibold text-green-600">
                                                {dailyGoal - dailyCalories >= 0 
                                                    ? `${dailyGoal - dailyCalories} calories remaining` 
                                                    : `${Math.abs(dailyGoal - dailyCalories)} calories over goal`
                                                }
                                            </span>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-3 gap-3">
                                        <div className="text-center p-3 bg-blue-50 rounded-lg">
                                            <div className="text-lg font-semibold text-blue-600">{consumedToday.reduce((sum, item) => sum + item.protein, 0)}g</div>
                                            <div className="text-xs text-gray-600">Protein</div>
                                        </div>
                                        <div className="text-center p-3 bg-yellow-50 rounded-lg">
                                            <div className="text-lg font-semibold text-yellow-600">{consumedToday.reduce((sum, item) => sum + item.carbs, 0)}g</div>
                                            <div className="text-xs text-gray-600">Carbs</div>
                                        </div>
                                        <div className="text-center p-3 bg-purple-50 rounded-lg">
                                            <div className="text-lg font-semibold text-purple-600">{consumedToday.reduce((sum, item) => sum + item.fat, 0)}g</div>
                                            <div className="text-xs text-gray-600">Fat</div>
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-white rounded-xl shadow-sm p-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-4">Today's Meals</h3>
                                    {consumedToday.length === 0 ? (
                                        <div className="text-center py-8 text-gray-500">
                                            <Clock className="h-12 w-12 mx-auto mb-3 text-gray-300" />
                                            <p>No meals logged yet</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-3">
                                            {consumedToday.map((item, index) => (
                                                <div key={index} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                    <div>
                                                        <div className="font-medium text-gray-800">{item.item}</div>
                                                        <div className="text-sm text-gray-600">{item.restaurant} ‚Ä¢ {item.calories} cal</div>
                                                    </div>
                                                    <button
                                                        onClick={() => removeFromConsumed(index)}
                                                        className="p-2 text-red-600 hover:bg-red-100 rounded-full transition-colors"
                                                    >
                                                        <Minus className="h-4 w-4" />
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                        
                        {/* Other views can be added here following the same pattern */}

                    </div>

                    {/* Mobile Navigation */}
                    <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 z-40">
                        <div className="flex justify-around">
                            {[
                                { view: 'discover', icon: Search, label: 'Discover' },
                                { view: 'tracking', icon: Target, label: 'Track' },
                                { view: 'premium', icon: Crown, label: 'Premium' },
                                { view: 'about', icon: Info, label: 'Contact' }
                            ].map(({ view, icon: Icon, label }) => (
                                <button
                                    key={view}
                                    onClick={() => setCurrentView(view)}
                                    className={`flex flex-col items-center py-2 px-3 rounded-lg transition-all duration-300 ${
                                        currentView === view ? 'text-blue-600 transform -translate-y-1' : 'text-gray-500'
                                    }`}
                                >
                                    <Icon className="icon-sm mb-1" />
                                    <span className="text-xs">{label}</span>
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Disclaimer Modal would go here */}
                </div>
            );
        };

        ReactDOM.render(<LocalPlateApp />, document.getElementById('root'));
    </script>
</body>
</html>
